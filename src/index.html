<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>WelcomeFirebase</title>
  <base href="/" />
  <script type="text/javascript">

    function appendquery(params, key) {
      return `${key}=${encodeURIComponent(params.get(key))}`;
    }

    function createquery(keys, params) {
      let query = "";
      var first = true;
      for (const key of keys) {
        if (first) {
          first = false;
          query += "?";
        } else {
          query += "&";
        }
        query += appendquery(params, key);
      }
      return query;
    }

    const querykeys = [
      "sv",
      "ss",
      "srt",
      "sp",
      "se",
      "st",
      "spr",
      "sig",
    ];
    const params = new URL(document.location.toString()).searchParams;
    const importquery = createquery(querykeys, params);
    var loadfailed = false;

    if (params.get('sig') === null) {
      loadfailed = true;
    }

    const body = document.getElementsByTagName("head")[0];
    function appendElement(type, attrs) {
      console.debug(`load <${type} href='${attrs['href']}' src='${attrs['src']}' />`);
      if (loadfailed) {
        console.log('skip load, no sig provided');
        return;
      }
      var el = document.createElement(type);
      for (const [key, value] of Object.entries(attrs)) {
        el.setAttribute(key, value);
      }
      body.append(el);
    }
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    crossorigin="anonymous" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" />
</head>

<body>
  <app-root>
    <div id="loading-status">loading</div>
    <script>
      if (loadfailed) {
        document.getElementById("loading-status").textContent = "failed to load, missing signature";
      }
    </script>
  </app-root>
</body>

</html>